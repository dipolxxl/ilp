# API списания/начисления баллов

Разработать JSON HTTP API, позволяющее:

- начислить/списать n баллов пользователю (возможно 2 одновременных запроса на изменение баланса одного пользователя)
- получить список пользователей (имя, текущий баланс)
- получить историю операций (список транзакций) пользователя


## Технические требования:

- ruby (фреймворк или его отсутсвие не имеет значения)
- данные хранятся в реляционной БД
- тесты

Желательно написать короткое readme с описанием методов API (HTTP глагол, url, тело запроса)

---

## Описание методов API

| HTTP глагол   | url              | тело запроса      | описание
| ------------- |:----------------:|:------------------|:-----------------------------------------------
| POST          | ../users/3/txns  | { amount: 2 }     | начислить 2 бала пользователю с id 3
| POST          | ../users/5/txns  | { amount: -3 }    | списать 3 бала c пользователя с id 5
| GET           | ../users         | {}                | получить список пользователей (имя, баланс)
| GET           | ../users/4/txns  | {}                | получить историю операций пользователя с id 4

----

### Для проверки можно использовать следующие запросы:
(при условии что сервер запужен на 3000 порту)

- начислить 2 балла пользователю с id 1
```bash
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d ' {"txn": {"amount":2}}' http://localhost:3000/users/1/txns
```
  в случае успеха в заголовоке ответа (http head) вернется 201, в случае неудачи - 422

- списать 3 балла с пользователя id 1
```bash
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d ' {"txn": {"amount":-3}}'  http://localhost:3000/users/1/txns
```
  в случае успеха в заголовоке ответа (http head) вернется 201, в случае неудачи - 422

- получить список пользователей (имя, текущий баланс)
```bash
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X GET http://localhost:3000/users
```
  пример ответа: {'users':[{'name': 'Test', 'balance': 5}, ...]}

- получить историю операций (список транзакций) пользователя c id 1
```bash
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X GET http://localhost:3000/users/1/txns
```
  пример ответа: {'txns':[{'id': 42, 'amount': 5, 'created_at': '2014-06-24T08:21:37.893Z'}, ...]}


### Пояснение
- фреймворк - Ruby on Rails 4
- реляционная БД - PostgreSQL
- тесты - Rspec 3

Некоторые данные (баланс пользователя) хранятся в денормализованной форме (в таблице 'users') для снижения
кол-ва запросов при выводе всех пользователей с балансов (не нужно будет вычислять баланс при каждом запросе).
При изменении баланса (транзакция на пополнение или на списание) баланс пользователя пересчитывается.

Я намеренно не создавал отдельное пространство имен (пример: ../api/users или ../api/v1.1/users) - для экономии времени.
Авторизация\аутентификация - не реализована (не требуется в задании) - для экономии времени.
